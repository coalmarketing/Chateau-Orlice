<!-- PAGE SERVICES -->
<section class="py-24 ~px-4/8 relative bg-cream z-10">
    <div class="container m-auto flex flex-col gap-16">
        <!-- HEADING + TEXT -->
        <div class="flex flex-col items-center gap-4">
            <!-- TOPPER + HEADING -->
            <div class="flex flex-col items-center gap-4">
                <!-- TOPPER -->
                <span class="topper-container">
                    {% include "components/topper-decoration.njk" %}
                    <span class="topper">{{ pageServices.topper }}</span>
                    {% include "components/topper-decoration.njk" %}
                </span>

                <h2 class="~max-w-md/2xl text-center ~text-3xl/5xl font-black uppercase">{{ pageServices.heading | safe}}</h2>
            </div>

            <!-- TEXT -->
            <p class="max-w-2xl font-jakarta-sans text-center ~text-sm/base text-ochre">{{ pageServices.text | safe }}</p>
        </div>

        {% if pageServices.items | length > 2 %}
            {% set gridCols = 'grid-cols-1 md:grid-cols-2 xl:grid-cols-3' %}
        {% elif pageServices.items | length % 2 == 0 %}
            {% set gridCols = 'grid-cols-1 md:grid-cols-2' %}
        {% elif pageServices.items | length % 1 == 0 %}
            {% set gridCols = 'grid-cols-1' %}
        {% else %}
            {% set gridCols = 'grid-cols-1 md:grid-cols-2 xl:grid-cols-3' %}
        {% endif %}

        <ul class="grid {{ gridCols }} ~gap-4/8 w-full">
            {% for item in pageServices.items %}
                <li class="relative sm:h-[24rem] max-sm:aspect-square w-full p-4 z-10 before:absolute before:top-0 before:left-0 before:h-full before:w-full before:bg-black/50 before:-z-10">
                    <!-- INNER CONTAINER -->
                    <div class="flex flex-col justify-center items-center gap-8 h-full ~p-4/8 border-2 border-white">
                        <h3 class="text-center ~text-2xl/3xl text-white font-black">{{ item.title }}</h3>

                        <a href="{{ item.url | locale_url }}" class="btn-secondary text-white after:border-white">{{ posts[page.lang].cta }}</a>
                    </div>

                    <!-- BACKGROUND IMAGE -->
                    <picture>
                        <!-- MOBILE IMAGE -->
                        <source media="(max-width: 600px)" srcset="{% getUrl item.imageUrl | resize({ width: 768, height: 768 }) | avif %}" type="image/avif">
                        <source media="(max-width: 600px)" srcset="{% getUrl item.imageUrl | resize({ width: 768, height: 768 }) | webp %}" type="image/webp">
                        <source media="(max-width: 600px)" srcset="{% getUrl item.imageUrl | resize({ width: 768, height: 768 }) | jpeg %}" type="image/jpeg">
                        <!-- TABLET IMAGE -->
                        <source media="(max-width: 1024px)" srcset="{% getUrl item.imageUrl | resize({ width: 1524, height: 768 }) | avif %}" type="image/avif">
                        <source media="(max-width: 1024px)" srcset="{% getUrl item.imageUrl | resize({ width: 1524, height: 768 }) | webp %}" type="image/webp">
                        <source media="(max-width: 1024px)" srcset="{% getUrl item.imageUrl | resize({ width: 1524, height: 768 }) | jpeg %}" type="image/jpeg">
                        <!-- DESKTOP IMAGE -->
                        <source media="(min-width: 1024px)" srcset="{% getUrl item.imageUrl | resize({ width: 896, height: 768 }) | avif %}" type="image/avif">
                        <source media="(min-width: 1024px)" srcset="{% getUrl item.imageUrl | resize({ width: 896, height: 768 }) | webp %}" type="image/webp">
                        <source media="(min-width: 1024px)" srcset="{% getUrl item.imageUrl | resize({ width: 896, height: 768 }) | jpeg %}" type="image/jpeg">
                        <img
                            class="object-cover absolute top-0 left-0 h-full w-full -z-20"
                            src="{% getUrl item.imageUrl | resize({ width: 896, height: 768 }) | jpeg %}"
                            alt="{{ item.imageAlt }}"
                            width="448"
                            height="384"
                            loading="eager"
                            decoding="async"
                            aria-hidden="true"
                            draggable="false">
                    </picture>
                </li>
            {% endfor %}
        </ul>
    </div>

    <!-- BACKGROUND -->
    <img
        class="object-cover absolute top-0 left-0 h-full w-full -z-10"
        src="/assets/svgs/tilling-background_black-gold.svg"
        alt="{{ pageServices.backgroundAlt }}"
        width="1920"
        height="1044"
        loading="lazy"
        decoding="async"
        aria-hidden="true"
        draggable="false">
</section>